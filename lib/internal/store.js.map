{"version":3,"sources":["../../src/internal/store.js"],"names":["Store","filterKind","filterStory","setStories","stories","current","forEach","story","skipped","test","kind","isMultipleViewport","Array","isArray","viewport","vp","push","filename","namespace","filter"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;;;;;IAEqBA,K;;;AACnB,iBAAYC,UAAZ,EAAwBC,WAAxB,EAAqC;AAAA;;AAAA;;AAEnC,UAAKD,UAAL,GAAkBA,UAAlB;AACA,UAAKC,WAAL,GAAmBA,WAAnB;AACA,UAAKC,UAAL,CAAgB,EAAhB;AAJmC;AAKpC;;;;+BAEUC,O,EAAS;AAAA;;AAClB,WAAKC,OAAL,GAAe,CAAf;AACA,WAAKD,OAAL,GAAe,EAAf;;AAEAA,cAAQE,OAAR,CAAgB,UAACC,KAAD,EAAW;AACzB,YAAMC,UACH,OAAKP,UAAL,IAAmB,CAAC,OAAKA,UAAL,CAAgBQ,IAAhB,CAAqBF,MAAMG,IAA3B,CAArB,IACC,OAAKR,WAAL,IAAoB,CAAC,OAAKA,WAAL,CAAiBO,IAAjB,CAAsBF,MAAMA,KAA5B,CAFxB;;AAKA,YAAMI,qBAAqBC,MAAMC,OAAN,CAAcN,MAAMO,QAApB,CAA3B;AACA,YAAMA,WAAWH,qBAAqBJ,MAAMO,QAA3B,GAAsC,CAACP,MAAMO,QAAP,CAAvD;;AAEAA,iBAASR,OAAT,CAAiB,UAACS,EAAD,EAAQ;AACvB,iBAAKX,OAAL,CAAaY,IAAb,cACKT,KADL;AAEEO,sBAAUC,EAFZ;AAGEP,4BAHF;AAIES,sBAAU,2BACRV,MAAMG,IADE,EAERH,MAAMA,KAFE,EAGRI,qBAAqBI,EAArB,GAA0B,IAHlB,EAIRR,MAAMW,SAJE;AAJZ;AAWD,SAZD;AAaD,OAtBD;AAuBD;;;iCAEY;AACX,aAAO,KAAKd,OAAL,CAAae,MAAb,CAAoB;AAAA,eAAS,CAACZ,MAAMC,OAAhB;AAAA,OAApB,CAAP;AACD;;;wCAEmB;AAClB,aAAO,KAAKJ,OAAL,CAAae,MAAb,CAAoB;AAAA,eAASZ,MAAMC,OAAf;AAAA,OAApB,CAAP;AACD;;;;;;kBA3CkBR,K","file":"store.js","sourcesContent":["import { EventEmitter } from 'events';\nimport { story2filename } from './utils';\n\nexport default class Store extends EventEmitter {\n  constructor(filterKind, filterStory) {\n    super();\n    this.filterKind = filterKind;\n    this.filterStory = filterStory;\n    this.setStories([]);\n  }\n\n  setStories(stories) {\n    this.current = 0;\n    this.stories = [];\n\n    stories.forEach((story) => {\n      const skipped = (\n        (this.filterKind && !this.filterKind.test(story.kind)) ||\n        (this.filterStory && !this.filterStory.test(story.story))\n      );\n\n      const isMultipleViewport = Array.isArray(story.viewport);\n      const viewport = isMultipleViewport ? story.viewport : [story.viewport];\n\n      viewport.forEach((vp) => {\n        this.stories.push({\n          ...story,\n          viewport: vp,\n          skipped,\n          filename: story2filename(\n            story.kind,\n            story.story,\n            isMultipleViewport ? vp : null,\n            story.namespace,\n          ),\n        });\n      });\n    });\n  }\n\n  getStories() {\n    return this.stories.filter(story => !story.skipped);\n  }\n\n  getSkippedStories() {\n    return this.stories.filter(story => story.skipped);\n  }\n}\n"]}